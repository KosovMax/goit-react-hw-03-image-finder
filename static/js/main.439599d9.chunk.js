(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a(1),r=a(17),s=a.n(r),c=a(4),l=a(5),i=a(7),h=a(6),d=a(18),u=a.n(d),m=a(19),g=a.n(m),p=function(e){Object(i.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({search:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),(0,n.props.changeSearch)(n.state.search)},n.state={search:n.props.search},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(n.jsx)("header",{className:"Searchbar",children:Object(n.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(n.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(n.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(n.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",name:"search",value:this.state.search,onChange:this.handleChange})]})})}}]),a}(o.Component);function j(e){var t=e.id,a=e.src,o=e.alt,r=e.showIdModel;return Object(n.jsx)("li",{className:"ImageGalleryItem",children:Object(n.jsx)("img",{src:a,alt:o,onClick:function(){return r(t)},className:"ImageGalleryItem-image"})})}function b(e){var t=e.imageGalleries,a=e.showIdModel;return Object(n.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){return Object(n.jsx)(j,{src:e.webformatURL,id:e.id,showIdModel:a},e.id)}))})}function f(e){var t=e.onLoad;return Object(n.jsx)("div",{style:{textAlign:"center"},children:Object(n.jsx)("button",{type:"button",onClick:t,className:"Button",children:"Load more"})})}p.defaultProps={search:""},j.defaultProps={src:"https://dummyimage.com/640x480/2a2a2a/ffffff&text=No+image",alt:""},b.defaultProps={imageGalleries:[]};var O=function(e){Object(i.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){window.addEventListener("keydown",n.handler)},n.componentWillUnmount=function(){window.removeEventListener("keydown",n.handler)},n.handler=function(e){"Escape"===e.key&&n.props.closeModal()},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.src,a=e.closeModal;return Object(n.jsx)("div",{className:"Overlay",onClick:a,children:Object(n.jsx)("div",{className:"Modal",children:Object(n.jsx)("img",{src:t,alt:""})})})}}]),a}(o.Component),v=function(e){Object(i.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).updateSerach=function(e){n.state.search!=e&&n.setState({search:e,imageGalleries:[]})},n.onLoadMore=function(){n.setState({page:n.state.page+1}),setTimeout((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),1e3)},n.componentDidUpdate=function(e,t){var a=n.state,o=a.search,r=a.page;t.search===o&&t.page===r||(n.setState({loading:!0}),u.a.get("https://pixabay.com/api/?q="+o+"&page="+r+"&key=19319242-70903095163a85f904f3acecb&image_type=photo&orientation=horizontal&per_page=12").then((function(e){return n.setState({imageGalleries:n.state.imageGalleries.concat(e.data.hits)})})).catch((function(e){return n.setState({error:e})})).finally((function(){return n.setState({loading:!1})})))},n.showIdModel=function(e){var t=n.state.imageGalleries;console.log(e);var a=t.find((function(t){return t.id===e}));console.log(a),n.setState({srcModal:a.largeImageURL,showModal:!0})},n.toggleModal=function(){n.setState({showModal:!n.state.showModal})},n.state={imageGalleries:[],page:1,search:"",loading:!1,error:null,srcModal:"",showModal:!1},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.search,a=e.imageGalleries,o=e.loading,r=e.error,s=e.srcModal,c=e.showModal;return console.log(this.state),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(p,{search:t,changeSearch:this.updateSerach}),r&&Object(n.jsxs)("p",{children:["Whoops, something went wrong: ",r.message]}),a.length>0&&Object(n.jsx)(b,{imageGalleries:a,showIdModel:this.showIdModel}),o&&Object(n.jsx)(g.a,{type:"Oval",color:"#00BFFF",height:100,width:100,style:{textAlign:"center"}}),a.length>0&&Object(n.jsx)(f,{onLoad:this.onLoadMore}),c&&Object(n.jsx)(O,{src:s,closeModal:this.toggleModal})]})}}]),a}(o.Component);a(63);s.a.render(Object(n.jsx)(v,{}),document.querySelector("#root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.439599d9.chunk.js.map